# Multiple Levels

```jres
{
    "transparency16": {
        "data": "hwQQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",
        "mimeType": "image/x-mkcd-f4",
        "tilemapTile": true
    },
    "tile1": {
        "data": "hwQQABAAAADMzMzMzMzMzLy7u7u7u7vLvMvMzMzMvMu8vMzMzMzLy7zMy8zMvMzLvMy8zMzLzMu8zMzLvMzMy7zMzLzLzMzLvMzMvMvMzMu8zMzLvMzMy7zMvMzMy8zLvMzLzMy8zMu8vMzMzMzLy7zLzMzMzLzLvLu7u7u7u8vMzMzMzMzMzA==",
        "mimeType": "image/x-mkcd-f4",
        "tilemapTile": true
    },
    "tile2": {
        "data": "hwQQABAAAAAiIiIiIiIiIkJEREREREQkQiIiIiIiIiRCIiIiIiIiJEIiREQiIiIkQkJERCIkJCRCQiREJCQkJEJCREQiQiIkQkJERCRCIiRCQiREIiQkJEIiREQkJCQkQiIiIiIiIiRCIiIiIiIiJEIiIiIiIiIkQkRERERERCQiIiIiIiIiIg==",
        "mimeType": "image/x-mkcd-f4",
        "tilemapTile": true
    },
    "tile3": {
        "data": "hwQQABAAAAB3d3d3d3d3d1dVVVVVVVV1V3d3d3d3d3VXd3d3d3d3dVdXVVVVVXd1V1dXV3d3d3VXV3VVd3d3dVdXV1d3d3d1V3d1dXV3d3VXd1VXdXd3dVd3dXV1d3d1V3dVVXV3d3VXd3d3d3d3dVd3d3d3d3d1V1VVVVVVVXV3d3d3d3d3dw==",
        "mimeType": "image/x-mkcd-f4",
        "tilemapTile": true
    },
    "tile4": {
        "data": "hwQQABAAAABERERERERERFRVVVVVVVVFVEREREREREVURFRFRERERVRERVRERERFVFRVVUVEREVUVFVVVURFRVRUVVVVVUVFVFRVVVVVRUVUVFVVVURFRVRUVVVFRERFVERFVEREREVURFRFRERERVRERERERERFVFVVVVVVVUVERERERERERA==",
        "mimeType": "image/x-mkcd-f4",
        "tilemapTile": true
    },
    "tile5": {
        "data": "hwQQABAAAACqqqqqqqqqqrq7u7u7u7uruqqqqqqqqqu6qqqqqqqqq7qqqqqqqqqruqqqqqqqqqu6qrurqqqqq7q6u7u7uqururq7u7u6q6u6qrurqqqqq7qqqqqqqqqruqqqqqqqqqu6qqqqqqqqq7qqqqqqqqqruru7u7u7u6uqqqqqqqqqqg==",
        "mimeType": "image/x-mkcd-f4",
        "tilemapTile": true
    },
    "level": {
        "id": "level",
        "mimeType": "application/mkcd-tilemap",
        "data": "MTAxZTAwMGEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA0MDAwMDAwMDAwMDAwMDQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAzMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAxMDEwMDAwMDEwMDAwMDUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMTAxMDEwMTAxMDEwMTAxMDEwMDAwMDAwMDAwMDUwMDAwMDAwMDAwMDUwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAyMDAwMDIwMDAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMjIwMjIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDIwMjIyMjIyMjIwMjAwMDAwMDAwMDAyMDIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMg==",
        "tileset": [
            "myTiles.transparency16",
            "myTiles.tile1",
            "myTiles.tile3",
            "myTiles.tile4",
            "myTiles.tile5",
            "myTiles.tile2"
        ]
    },
    "*": {
        "mimeType": "image/x-mkcd-f4",
        "dataEncoding": "base64",
        "namespace": "myTiles"
    }
}
```

```ghost
sprites.allOfKind(SpriteKind.Enemy)
currentLevel.fill(0)
for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
    }
```

```template
scene.onOverlapTile(SpriteKind.Player, myTiles.tile2, function (sprite, location) {
    game.over(false)
})
scene.onOverlapTile(SpriteKind.Player, myTiles.tile4, function (sprite, location) {
    game.over(true)
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    mySprite.vy = -200
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy()
    if (sprite.bottom < otherSprite.y) {
        sprite.vy = -100
    } else {
        info.changeLifeBy(-1)
    }
})
let myEnemy: Sprite = null
let mySprite: Sprite = null
scene.setBackgroundColor(11)
mySprite = sprites.create(img`
    3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
    3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 1 1 1 3 3 3 1 3 3 3 1 3
    3 1 3 3 1 3 3 1 3 1 1 3 3 3 1 3
    3 1 3 3 1 3 3 1 3 3 1 3 3 3 1 3
    3 1 3 3 1 1 1 3 3 3 1 3 3 3 1 3
    3 1 3 3 1 3 3 3 3 3 1 3 3 3 1 3
    3 1 3 3 1 3 3 3 3 1 1 1 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3
    3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
    `, SpriteKind.Player)
mySprite.ay = 500
controller.moveSprite(mySprite, 100, 0)
scene.cameraFollowSprite(mySprite)
info.setLife(3)
tiles.setTilemap(tilemap`level`)
tiles.placeOnRandomTile(mySprite, myTiles.tile3)
for (let value of tiles.getTilesByType(myTiles.tile5)) {
    myEnemy = sprites.create(img`
        a a a a a a a a a a a a a a a a
        a b b b b b b b b b b b b b b a
        a b a a a a a a a a a a a a b a
        a b a a b b a a a a b b a a b a
        a b a a a a b a a b a a a a b a
        a b a a a a a a a a a a a a b a
        a b a a a b a a a a b a a a b a
        a b a a a b a a a a b a a a b a
        a b a a a a a a a a a a a a b a
        a b a a a a a a a a a a a a b a
        a b a a a b b b b b b a a a b a
        a b a a b a a a a a a b a a b a
        a b a a a a a a a a a a a a b a
        a b a a a a a a a a a a a a b a
        a b b b b b b b b b b b b b b a
        a a a a a a a a a a a a a a a a
        `, SpriteKind.Enemy)
    tiles.placeOnTile(myEnemy, value)
    myEnemy.follow(mySprite, 30)
}


```

## B·∫Øt ƒë·∫ßu @unplugged

Ch√∫ng ta ti·∫øp t·ª•c v·ªõi vi·ªác thi·∫øt k·∫ø cho game c√≥ nhi·ªÅu c·∫•p ƒë·ªô. 

ƒê·ªÉ d·ªÖ d√†ng l√†m vi·ªác c≈©ng nh∆∞ t·∫°o nhi·ªÅu c·∫•p ƒë·ªô m√† kh√¥ng ph·∫£i l·∫∑p l·∫°i c√°c c√¥ng ƒëo·∫°n gi·ªëng nhau, ta s·ª≠ d·ª•ng c∆° ch·∫ø [**_function_**](#funky "t·∫≠p h·ª£p c√°c ƒëo·∫°n code ƒë∆∞·ª£c ƒë√°nh t√™n v√† d·ªÖ d√†ng truy h·ªìi").

![*C·∫•p ƒë·ªô* v√† *Function*](/static/skillmaps/platformer/platformer4.gif "And now for something completely different!  And a little bit the same.")


## T·∫°o m·ªôt function

M·ªôt **function** l√† m·ªôt t·ªï h·ª£p c√°c d√≤ng code ƒë∆∞·ª£c ƒë·ªãnh danh v√† d·ªÖ d√†ng truy h·ªìi
([**_call_**](#callingYou "ƒë∆∞·ª£c th√™m d·ªÖ d√†ng v√†o c√°c ƒëo·∫°n code kh√°c d·ª±a v√†o ƒë·ªãnh danh c·ªßa function ƒë√≥")) 
nhi·ªÅu l·∫ßn.
<hr/>

üî≤ Tr√™n b·∫£ng c√¥ng c·ª•, ch·ªçn ``||statusbar:ÀÖ Advanced||`` (h√¨nh m≈©i t√™n ch·ªâ xu·ªëng) v√† 
ch·ªçn ``||functions: Functions||`` (_f(x)_)

üî≤ Ch·ªçn ``||controller: Make a Function...||`` ƒë·ªÉ t·∫°o function m·ªõi.

üî≤ ·ªû ph·∫ßn t√™n ƒë·∫∑t s·∫µn l√† _something_, ta xo√° t√™n n√†y ƒëi v√† g√µ v√†o **startNextLevel**, r·ªìi ·∫•n **Done**. Function c·∫ßn t·∫°o s·∫Ω t·ª± ƒë·ªông xu·∫•t hi·ªán tr√™n m√†n h√¨nh l√†m vi·ªác.

![ƒê·∫∑t t√™n cho function](/static/skillmaps/platformer/name-function.gif "Say my name, say my name.")


```blocks
function startNextLevel() {
}
```


## T√πy bi·∫øn function (ph·∫ßn 1)
Gi·ªù th√¨ khi function c√≥ t√™n **startNextLevel** ƒë√£ c√≥, ta s·∫Ω c√πng ti·∫øn h√†nh s·∫Øp x·∫øp c√°c d√≤ng code c·∫ßn thi·∫øt nh√©!

T·∫•t c·∫£ c√°c d√≤ng l·ªánh c·∫ßn s·ª≠ d·ª•ng ƒë√£ c√≥ t·ª´ tr∆∞·ªõc, n·∫±m trong khay  
``||loops: on start||`` , ta ch·ªâ vi·ªác l·∫•y ra v√† gh√©p v√†o function m·ªõi t·∫°o .
<hr/>

üî≤ ƒê·∫∑t chu·ªôt ·ªü d√≤ng ``||scene: set tilemap to [ ]||`` , k√≠ch chu·ªôt tr√°i ƒë·ªÉ k√©o ra, to√†n b·ªô c√°c d√≤ng code b√™n d∆∞·ªõi c≈©ng s·∫Ω ƒëi theo, ta c·∫ßn ƒë∆∞a ch√∫ng ra ngo√†i khay ``||loops: on start||``.

üî≤ To√†n b·ªô c√°c d√≤ng code v·ª´a ƒë∆∞·ª£c l·∫•y ra, ta ƒë∆∞a v√†o khe tr·ªëng b√™n trong function **startNextLevel** .
<hr/>

**R·∫•t t·ªët! Ch√∫ng ta ƒë√£ c∆° b·∫£n t·∫°o ƒë∆∞·ª£c m·ªôt function c√≥ th·ªÉ ho·∫°t ƒë·ªông.**  


```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
function startNextLevel () {
    tiles.setTilemap(tilemap`level`)
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }
}
```

## T√πy bi·∫øn function (ph·∫ßn 2)

Gi·ªù ƒë·∫øn ph·∫ßn quan tr·ªçng: ch√∫ng ta ph·∫£i t·∫≠n d·ª•ng ƒë∆∞·ª£c ch·ª©c nƒÉng c·ªßa function m·ªõi t·∫°o v√†o vi·ªác l·∫≠p tr√¨nh game.

Function m√† b·∫°n v·ª´a t·∫°o ra ch·ªâ l√† t·ªï h·ª£p ƒë∆∞·ª£c ƒë·ªãnh danh ([**_definition_**](#defineMe "explanation of the meaning"))
v√† t·ª´ ƒë√≥ m√°y t√≠nh s·∫Ω truy c·∫≠p d·ª±a v√†o t√™n c·ªßa n√≥ (·ªü ƒë√¢y l√† **startNextLevel**).
Tuy nhi√™n, ta c·∫ßn gi√∫p m√°y t√≠nh c√≥ th√™m d·ªØ li·ªáu ƒë·ªÉ bi·∫øt  _**khi n√†o**_ th√¨ function s·∫Ω ƒë∆∞·ª£c g·ªçi t√™n.

ƒê·ªÉ l√†m ƒëi·ªÅu n√†y, ta s·∫Ω ph·∫£i:.
<hr/>
üî≤ Trong c√¥ng cu ``||functions: Functions||`` ta t√¨m v√†o k√©o ra kh·ªëi l·ªánh 
``||functions: call startNextLevel||`` ra ngo√†i m√†n h√¨nh v√† ƒë∆∞a n√≥ xu·ªëng v·ªã tr√≠ d∆∞·ªõi c√πng trong khay ch·ª©a
``||loops: on start||`` .
<hr/>
Gi·ªù th√¨ c∆° b·∫£n m·ªçi th·ª© trong game v·∫´n ch∆∞a c√≥ thay ƒë·ªïi g√¨ c·∫£, tuy nhi√™n ƒë√≥ l√† cho ƒë·∫øn khi ta ti·∫øn h√†nh b∆∞·ªõc ti·∫øp theo!  


```blocks

function startNextLevel () {
    tiles.setTilemap(tilemap`level`)
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }
}

let myEnemy: Sprite = null
let currentLevel = 0
let mySprite: Sprite = null
scene.setBackgroundColor(11)
mySprite = sprites.create(img`
    3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
    3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 1 1 1 3 3 3 1 3 3 3 1 3
    3 1 3 3 1 3 3 1 3 1 1 3 3 3 1 3
    3 1 3 3 1 3 3 1 3 3 1 3 3 3 1 3
    3 1 3 3 1 1 1 3 3 3 1 3 3 3 1 3
    3 1 3 3 1 3 3 3 3 3 1 3 3 3 1 3
    3 1 3 3 1 3 3 3 3 1 1 1 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 3 3 3 3 3 3 3 3 3 3 3 3 1 3
    3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3
    3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
    `, SpriteKind.Player)
mySprite.ay = 500
controller.moveSprite(mySprite, 100, 0)
scene.cameraFollowSprite(mySprite)
info.setLife(3)
// @highlight
startNextLevel()
```

## T√πy bi·∫øn function (ph·∫ßn 3)

üèÜ  D·∫•u hi·ªáu chuy·ªÉn c·∫•p ƒë·ªô üèÜ

Khi nh√¢n v·∫≠t k·∫øt th√∫c m√†n ch∆°i v√† chuy·ªÉn sang m√†n ch∆°i ti·∫øp theo, ta c·∫ßn c√≥ m·ªôt m·ªëc ƒë·ªÉ ƒë√°nh d·∫•u ƒëi·ªÅu n√†y, c·ª• th·ªÉ ·ªü ƒë√¢y b·∫°n h√£y ƒë·∫∑t 1 chi·∫øc c√∫p nh∆∞ ph·∫ßn th∆∞·ªüng cho nh√¢n v·∫≠t ·ªü cu·ªëi m√†n. 
<hr/>
üî≤ Ta lo·∫°i b·ªè c·ª•m code ``||game: game over <WIN>||`` kh·ªèi khay l·ªánh 
**on sprite overlaps üèÜ**  , ƒë·ªìng th·ªùi thay th·∫ø n√≥ b·∫±ng 
d√≤ng l·ªánh m·ªõi ``||functions: call startNextLevel||`` .  
<br/>

```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
scene.onOverlapTile(SpriteKind.Player, myTiles.tile4, function (sprite, location) {
   // @highlight
    startNextLevel()
})
function startNextLevel () {
    tiles.setTilemap(tilemap`level`)
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }
}
```

## Tu·ª≥ bi·∫øn c√°c m√†n ch∆°i (ph·∫ßn 1)

üëæ M·ªôt game hay c√≥ th·ªÉ thu h√∫t ng∆∞·ªùi ch∆°i v·ªõi c√†ng nhi·ªÅu m√†n ch∆°i c√†ng t·ªët üëæ

Trong qu√° tr√¨nh t·∫°o ra tr√≤ ch∆°i, ƒë·ªÉ d√°nh d·∫•u m·ªói m√†n ch∆°i ta d√πng c∆° ch·∫ø **variable**.

Trong tr∆∞·ªùng h·ª£p n√†y, c∆° ch·∫ø **variable** gi√∫p ta kh√¥ng ph·∫£i ti·∫øn h√†nh l·∫≠p tr√¨nh l·∫°i to√†n b·ªô m√†n ch∆°i m√† ta c√≥ th·ªÉ t·∫≠n d·ª•ng nh·ªØng y·∫øu t·ªë c√≥ th·ªÉ l·∫∑p l·∫°i trong m·ªói m√†n ch∆°i.
<hr/>

üî≤ T·∫°o m·ªôt **variable** m·ªõi b·∫±ng c√°ch k√≠ch v√†o c√¥ng c·ª• ``||variables: Variables||`` , ch·ªçn ``||controller: Make a Variable...||`` .

üî≤ ƒê·∫∑t t√™n l√† **currentLevel** v√† ·∫•n **OK**.  
<br/>

## Tu·ª≥ bi·∫øn c√°c m√†n ch∆°i (ph·∫ßn 1)

V·ªõi **currentLevel** m·ªõi t·∫°o, ta s·∫Ω s·ª≠ d·ª•ng n√≥ m·ªôt c√°ch hi·ªáu qu·∫£ ƒë·ªÉ m·ªói l·∫ßn nh√¢n v·∫≠t qua m√†n, ta s·∫Ω ƒë∆∞·ª£c chuy·ªÉn sang c·∫•p ƒë·ªô cao h∆°n.
 <hr/>

üî≤ L·∫•y kh·ªëi ``||variables: change [currentLevel] by [1]||`` ra v√† ƒë∆∞a v√†o tr√™n c√πng function **startNextLevel** .  
<br/>

```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0
function startNextLevel () {
    currentLevel += 1
    tiles.setTilemap(tilemap`level`)
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }
    
}
```

## M√†n ch∆°i thay ƒë·ªïi (ph·∫ßn 1)

M·ªói l·∫ßn nh√¢n v·∫≠t k·∫øt th√∫c b·∫±ng c√°ch chi·∫øn th·∫Øng 1 m√†n ch∆°i, ta s·∫Ω l·∫≠p tr√¨nh ƒë·ªÉ nh√¢n v·∫≠t ƒë∆∞·ª£c ƒë∆∞a ƒë·∫øn m√†n ch∆°i ·ªü c·∫•p ƒë·ªô cao h∆°n, v·ªõi m·ªôt b·∫£n ƒë·ªì kh√°c, k·∫ª ƒë·ªãch kh√°c. 

ƒê·ªÉ l√†m th·∫ø, ta l·∫°i c·∫ßn ƒë·∫øn h√†m **n·∫øu - th√¨** (**if/then**)
<hr/>
üî≤ K√©o th√™m m·ªôt d√≤ng l·ªánh ``||logic: if <true> then||`` ra th·∫£ v√†o khay function **startNextLevel**, ƒë·∫∑t n√≥ ngay du·ªõi d√≤ng **change currentLevel by 1**.  
<br/>

```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0
function startNextLevel () {
    currentLevel += 1
    // @highlight
    if (true) {
    }
    tiles.setTilemap(tilemap`level`)
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }

}
```

## M√†n ch∆°i thay ƒë·ªïi (ph·∫ßn 2)

Tr∆∞·ªõc ti√™n, ta s·∫Ω c√≥ c∆° ch·∫ø ki·ªÉm tra m√†n ch∆°i hi·ªán t·∫°i l√† m√†n bao nhi√™u. N·∫øu nh∆∞ ƒëang ·ªü m√†n ƒë·∫ßu ti√™n, t·ª©c l√† m√†n **1**,  
Th√¨ m·ªçi thi·∫øt l·∫≠p c∆° b·∫£n c√≤n g·ªçi l√† thi·∫øt l·∫≠p g·ªëc s·∫Ω ƒë∆∞·ª£c hi·ªán th·ªã cho m√†n ƒë·∫ßu ti√™n.
<hr/> 

üî≤ Ta k√©o kh·ªëi l·ªánh ``||logic:[0] [=] [0]||`` v√† thay v√†o √¥ **`<true>`**
 trong c·ª•m ``||logic:if <true> then||`` ·ªü b∆∞·ªõc tr√™n.

üî≤ V·ªõi s·ªë **0** b√™n tr√°i, ta l·∫°i k√©o gi√° tr·ªã ``||variables:currentLevel||`` v√†o thay th·∫ø. 

üî≤ S·ªë **0** b√™n ph·∫£i ta xo√° ƒëi v√† ƒë√°nh thay b·∫±ng s·ªë **1**.  
<br/>

```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0
function startNextLevel () {
    currentLevel += 1
    // @highlight
    if (currentLevel === 1) {
    }
    tiles.setTilemap(tilemap`level`)
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }
}
```

## M√†n ch∆°i thay ƒë·ªïi (ph·∫ßn 3)

üí°  Tr∆∞·ªõc khi ta ƒëi ƒë·∫øn nh·ªØng thi·∫øt l·∫≠p ph·ª©c t·∫°p h∆°n, h√£y ƒë·∫£m b·∫£o c√°c l·ªánh code c∆° b·∫£n s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng nhi·ªÅu l·∫ßn c√≥ th·ªÉ ho·∫°t ƒë·ªông ch√≠nh x√°c t·ª´ m·ª©c ƒë·ªô ƒë·∫ßu ti√™n, nh∆∞ v·∫≠y v·ªÅ sau s·∫Ω kh√¥ng ph·∫£i ch·ªânh s·ª≠a nhi·ªÅu. 

Nh·∫•t l√† v·ªõi h√†m **if/then**.

<hr/>
Khi ƒë√£ x√°c ƒë·ªãnh ta ƒëang ·ªü m√†n ch∆°i **1**, b·∫£n ƒë·ªì g·ªëc ƒë∆∞·ª£c t·∫°o ƒë·∫ßu ti√™n s·∫Ω ƒë∆∞·ª£c d√πng.

üî≤ K√©o kh·ªëi ``||scene: set tilemap to [ ]||`` ngay d∆∞·ªõi h√†m **if/then** ra b·∫±ng c√°ch gi·ªØ ph√≠m control v√† k√≠ch chu·ªôt tr√°i, sau ƒë√≥ th·∫£ ngay v√†o khe tr·ªëng b√™n trong h√†m **if/then**.

Nh∆∞ v·∫≠y m·ªçi th·ª© di·ªÖn ra b√™n trong b·∫£n ƒë·ªì g·ªëc (ƒë∆∞·ª£c ƒë√°nh d·∫•u b·∫±ng kh·ªëi ``||scene: set tilemap to [ ]||`` ) ƒë·ªÅu s·∫Ω t·ª± li√™n k·∫øt.

```blocks

let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0
function startNextLevel () {
    currentLevel += 1
    if (currentLevel === 1) {
        tiles.setTilemap(tilemap`level`)
    }
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }
}
```

## M√†n ch∆°i thay ƒë·ªïi (ph·∫ßn 4)

Kh√° ·ªïn r·ªìi, gi·ªù ta ph·∫£i l√†m vi·ªác v·ªõi c∆° ch·∫ø c·ª• th·ªÉ ·ªü t·ª´ng m√†n ch∆°i khi nh√¢n v·∫≠t v·ªÅ ƒë√≠ch:

C√≥ v√†i v·∫•n ƒë·ªÅ logic c·∫ßn quan t√¢m:
 - Khi ta ƒëang ·ªü ch√≠nh m√†n ch∆°i **1**, ƒë∆∞∆°ng nhi√™n b·∫£n ƒë·ªì g·ªëc s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng ·ªü ƒë√¢y
 - Khi nh√¢n v·∫≠t ho√†n th√†nh m√†n ch∆°i (ch·∫°m v√†o chi·∫øc c√∫p ·ªü cu·ªëi m√†n), m√†n ch∆°i s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông tƒÉng l√™n c·∫•p ti·∫øp theo. 

Cho tr∆∞·ªùng h·ª£p m√†n ch∆°i chuy·ªÉn sang c·∫•p cao h∆°n n√†y, ta d√πng th√™m h√†m **else**
<hr/>  

üî≤ ·∫§n v√†o d·∫•u **‚äï** ·ªü cu·ªëi khay ch·ª©a h√†m **if/then** ƒë·ªÉ th√™m khe l·ªánh **else**.

üî≤ K√©o kh·ªëi ``||game: game over <WIN>||`` th·∫£ v√†o khe tr·ªëng v·ª´a t·∫°o.

```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0
function startNextLevel () {
    currentLevel += 1
    if (currentLevel === 1) {
        tiles.setTilemap(tilemap`level`)
    }
    else {
    // @highlight
        game.over(true)
    }
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }
}
```

## M√†n ch∆°i thay ƒë·ªïi (ph·∫ßn 5)

‚ùì‚ùì B·∫°n ƒë√£ s·∫µn s√†ng c√°c b∆∞·ªõc cho m√†n ch∆°i cao h∆°n ch∆∞a ‚ùì‚ùì

M·ªói khi qua m√†n, c√≥ nh·ªØng ƒëi·ªÅu sau c·∫ßn l∆∞u √Ω:
 - Ta c·∫ßn c√≥ h√†m **else if** ƒë·ªÉ ch·ªâ **ƒëi·ªÅu ki·ªán - k·∫øt qu·∫£**
 - Nh·ªØng y·∫øu t·ªë c·ªßa m√†n c≈© s·∫Ω ƒë∆∞·ª£c gi·ªØ l·∫°i
 - M√†n ch∆°i hi·ªán t·∫°i ƒë∆∞·ª£c ƒë√°nh th·ª© t·ª± ·ªü b√™n ph·∫£i d·∫•u **=**
 - M√†n ch∆°i m·ªõi th√¨ n√™n c√≥ b·∫£n ƒë·ªì m·ªõi ch·ª© kh√¥ng n√™n l·∫∑p l·∫°i

 Chu·∫©n b·ªã xong r·ªìi th√¨ ti·∫øn h√†nh th√¥i!
 <hr/>

üî≤ ·∫§n v√†o d·∫•u **‚äï** d∆∞·ªõi c√πng c·ªßa khay ch·ª©a h√†m **if/then/else** ƒë·ªÉ th√™m m·ªôt l·ªánh **else if** n·ªØa.

üî≤ Nh√¢n ƒë√¥i kh·ªëi ``||logic:[currentLevel] [=] [1]||`` b·∫±ng c√°ch k√≠ch chu·ªôt ph·∫£i v√† ch·ªçn **duplicate** r·ªìi th·∫£ v√†o trong d√£y l·ªánh **else if** v·ª´a t·∫°o.

üî≤ ·ªû ƒë√¢y ta ti·∫øn h√†nh ƒë·ªïi s·ªë **1** th√†nh **2**.

üî≤ T∆∞∆°ng t·ª± ta nh√¢n b·∫£n kh·ªëi ``||scene: set tilemap to [ ]||`` v√† ƒë∆∞a v√†o trong khe tr·ªëng c·ªßa l·ªánh **else if** m·ªõi.  
<br/>


```block
let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0

    if (currentLevel === 1) {
        tiles.setTilemap(tilemap`level`)
    }
    else if (currentLevel === 2) {
          tiles.setTilemap(tilemap`level`)

    }
    else {
        game.over(true)
    }
    

```

## M√†n ch∆°i thay ƒë·ªïi (ph·∫ßn 6)

üé® H√£y b·ªè c√¥ng s√°ng t·∫°o m·ªôt ch√∫t nh√© üé®

M√†n ch∆°i 2 kh√¥ng mu·ªën l·∫∑p l·∫°i nh∆∞ m√†n ch∆°i 1? V·∫≠y ph·∫£i thay ƒë·ªïi n√≥ ƒëi nh√©:
K√≠ch v√†o √¥ vu√¥ng trong kh·ªëi ``||scene: set tilemap to [ ]||`` , ta c√≥ th·ªÉ ch·ªânh s·ª≠a b·∫£n ƒë·ªì m√†n ch∆°i. 

Ch·ªânh s·ª≠a g√¨ th√¨ c≈©ng nh·ªõ ph·∫£i ƒë·ªÉ l·∫°i bi·ªÉu t∆∞·ª£ng c√∫p v√†ng l√†m m·ª•c ti√™u cho nh√¢n v·∫≠t chi·∫øn th·∫Øng ho·∫∑c qua m√†n 3,4,5... ti·∫øp theo nh√©! 


## K·∫ª ƒë·ªãch ·ªü m√†n ch∆°i m·ªõi (ph·∫ßn 1)

```ghost
sprites.allOfKind(SpriteKind.Enemy)
currentLevel.fill(0)
for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
    }
```

üéÆ B·∫°n ƒë√£ ch∆°i th·ª≠ game m√¨nh t·∫°o ƒë·∫øn ƒë√¢y ch∆∞a? üéÆ

N·∫øu ƒë√£ th·ª≠ ch∆°i, ta s·∫Ω th·∫•y ngay 1 v·∫•n ƒë·ªÅ: k·∫ª ƒë·ªãch ·ªü c√°c m√†n ch∆°i tr∆∞·ªõc v·∫´n c√≤n s·ªëng s·∫Ω t√°i xu·∫•t hi·ªán ·ªü m√†n ch∆°i sau.

N·∫øu c·ª© v·∫≠y, th√¨ s·ªë l∆∞·ª£ng k·∫ª ƒë·ªãch c√†ng v√†o c√°c m√†n ch∆°i sau s·∫Ω c√†ng tƒÉng d·∫ßn. ta ph·∫£i t√¨m c√°ch ngƒÉn ch·∫∑n vi·ªác n√†y!
<hr/>

üî≤ K√©o m·ªôt kh·ªëi l·ªánh h√†m l·∫∑p ``||loops: for element [value] of [list]||`` v√† th·∫£ v√†o **tr√™n c√πng** c·ªßa kh·ªëi function **startNextLevel**.

üî≤ T·ª´ c√¥ng c·ª• ``||sprites:Sprites||`` ta k√©o kh·ªëi ``||sprites:array of sprites of kind [Player]||`` v√† th·∫£ v√†o thay th·∫ø ch·ªó c·ªßa √¥ **list** (m√†u ƒë·ªè) ·ªü ƒë·∫ßu c·ªßa h√†m l·∫∑p m·ªõi v·ª´a t·∫°o.

üî≤ ƒê·ªïi gi√° tr·ªã **array of sprites** th√†nh **Enemy**. 
<hr/>


```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0
function startNextLevel () {
// @highlight
    for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
    }
    currentLevel += 1
    if (currentLevel === 1) {
        tiles.setTilemap(tilemap`level`)
    }
    else if (currentLevel === 2) {
        tiles.setTilemap(tilemap`level`)
    }
    else {
        game.over(true)
    }
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }

}
```


## K·∫ª ƒë·ªãch ·ªü m√†n ch∆°i m·ªõi (ph·∫ßn 2)

Gi·ªù th√¨ ta h√£y c√†i l·ªánh ƒë·ªÉ l≈© k·∫ª ƒë·ªãch t·ª´ m√†n ch∆°i c≈© kh√¥ng **"b√°m ƒëu√¥i"** ta l√™n m√†n ch∆°i m·ªõi nh√©.
<hr/>

üî≤ K√©o kh·ªëi ``||sprites: destroy [mySprite]||`` th·∫£ v√†o khe tr·ªëng c·ªßa h√†m l·∫∑p **for element**.

üî≤ Nh√¨n th·∫•y √¥ ``||variables: value||`` m√†u ƒë·ªè ph√≠a tr√™n kh√¥ng? k√©o xu·ªëng d∆∞·ªõi v√† ƒë√® v√†o √¥ ``||variables: mySprite||`` ƒë·ªÉ thay th·∫ø nh√©!

<hr/>

** V·∫≠y l√† xong! D√π ta c√≥ bao nhi√™u m√†n ch∆°i ƒëi n·ªØa th√¨ k·∫ª ƒë·ªãch ·ªü m√†n ch∆°i tr∆∞·ªõc s·∫Ω kh√¥ng c√≤n l√†m phi·ªÅn ch√∫ng ta khi l√™n c·∫•p n·ªØa **



```blocks
let myEnemy: Sprite = null
let mySprite: Sprite = null
let currentLevel = 0
function startNextLevel () {
// @highlight
    for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
        value.destroy()
    }
    currentLevel += 1
    if (currentLevel === 1) {
        tiles.setTilemap(tilemap`level`)
    }
    else if (currentLevel === 2) {
        tiles.setTilemap(tilemap`level`)
    }
    else {
        game.over(true)
    }
    tiles.placeOnRandomTile(mySprite, myTiles.tile3)
    for (let value of tiles.getTilesByType(myTiles.tile5)) {
        myEnemy = sprites.create(img`
            a a a a a a a a a a a a a a a a
            a b b b b b b b b b b b b b b a
            a b a a a a a a a a a a a a b a
            a b a a b b a a a a b b a a b a
            a b a a a a b a a b a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a b a a a a b a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b a a a b b b b b b a a a b a
            a b a a b a a a a a a b a a b a
            a b a a a a a a a a a a a a b a
            a b a a a a a a a a a a a a b a
            a b b b b b b b b b b b b b b a
            a a a a a a a a a a a a a a a a
            `, SpriteKind.Enemy)
        tiles.placeOnTile(myEnemy, value)
        myEnemy.follow(mySprite, 30)
    }

}
```